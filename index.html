<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>D3 Visualization</title>
    <link rel="stylesheet" href="./style.css" />
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
  </head>
  <body>
    <h1>Untangling Yarn</h1>
    <h3>By Caroline Wang</h3>
    <div class="explainer-text">
      For knitters and crocheters, choosing the right yarn for a project is one of the most important decisions to make. To see what kinds of yarn are out there, I analyzed a yarn database pulled from Ravelry, a community and documentation site for knitters, crocheters, and all yarn enthusiasts. 
      <br>
      <br>
      To understand yarn, we must first understand fiber. Fiber is the material that makes up yarn and can be broken into two categories: natural and synthetic. Natural fibers, such as merino or cotton, come from natural sources, like animals or plants. Synthetic fibers, like nylon or polyester, are synthetically made in a lab. Yarn can be made up of different blends of fibers or just one type of fiber. This article will investigate which fibers are most commonly blended together and why.
    </div>
    <h2>Which Fibers are Blended Together?</h1>
      <div class="explainer-text">
        The visualization below can be interacted with, where clicking on a fiber reveals which other fibers it is commonly blended with. The "other" category consists of fibers labeled as "other" on Ravelry, and few niche fibers, such as camel.
        <br>
        <br>
        From the visualization, we can look at 
        <button id="vis1-as-text-nylon" class="as-text">nylon</button> 
        and see that 12,724 yarns contain both nylon and merino fibers, and that 33.7% of yarns with nylon also contain merino. Nylon is blended most commonly with natural fibers. Meanwhile, there are not as many yarns blending nylon with other synthetic fibers, and even less yarns that are made purely from nylon. 
        <br>
        <br>
        <strong>In contrast, many </strong>
        <button id="vis1-as-text-merino" class="as-bold-text">natural fibers</button> 
        <strong> are found purely by themselves, or they are blended with other natural fibers. When they <i>are</i> blended with synthetic fibers, nylon is a top choice.</strong> 
      </div>
    <div class="button-filters" id="vis1-buttons">
      <div class="label-container">
        <span class="button-labels">Synthetic Fibers</span>
        <span class="button-labels">Natural Fibers</span>
      </div>

      <div class="button-container">
        <div class="synthetic-buttons">
          <button data-filter="Acrylic">Acrylic</button>
          <button data-filter="Nylon" class="active-button" id="vis1-nylon-button">Nylon</button>
          <button data-filter="Polyester">Polyester</button>
          <button data-filter="Rayon">Rayon</button>
        </div>

        <div class="natural-buttons">
          <button data-filter="Alpaca">Alpaca</button>
          <button data-filter="Cashmere">Cashmere</button>
          <button data-filter="Cotton">Cotton</button>
          <button data-filter="Merino" id="vis1-merino-button">Merino</button>
          <button data-filter="Mohair">Mohair</button>
          <button data-filter="Silk">Silk</button>
          <button data-filter="Wool">Wool</button>
        </div>
      </div>
      </div>
   
    
    <svg id="vis1" width="800" height="600"></svg>
   
    <h2>Which Fibers are Highly Rated?</h1>
      <div class="explainer-text">To understand why natural fibers are most commonly blended with each other, we can investigate the average yarn ratings given by Ravelry users. In the visualization below, click on a fiber to see how many yarns contain a certain percentage of that fiber, and the average rating those yarns received. The percentage in the parentheses indicate what percentage of yarns that contain the selected fiber are composed of the fiber at the percentage indicated by the x-axis. Yarns that received fewer than 50 ratings are excluded from this visualization. Note the changing y-axis.
        <br>
        <br> 
        Again, we can look at 
        <button id="vis2-as-text-nylon" class="as-text">nylon</button>
        and see that the majority of yarns which contain this fiber
         have it at a low percentage. Furthermore, the lower the percentage of nylon that is present, the higher the yarn's rating. Similar trends can be observed with 
         
         <button id="vis2-as-text-rayon" class="as-text">other synthetic fibers</button> 
         . <strong>Meanwhile, </strong>

         <button id="vis2-as-text-merino" class="as-bold-text">natural fibers</button> 
         <strong> are more highly rated than synthetic fibers, no matter the percentage.</strong> 
        <br>
        <br> 
        <strong>This implies that yarns with natural fibers are of higher quality than yarns with a lot of synthetic fibers.</strong> Therefore, natural fibers are often blended together to maintain the yarn's high quality, and synthetic fibers are blended at a lower percentage to avoid compromising the yarn's quality. 
        </div>
    <div class="vis">

    
    <div class="button-filters" id="vis2-buttons">
      <div class="label-container">
        <span class="button-labels">Synthetic Fibers</span>
        <span class="button-labels">Natural Fibers</span>
        
      </div>

      <div class="button-container">
        <div class="synthetic-buttons">
          <button data-filter="Acrylic">Acrylic</button>
          <button data-filter="Nylon" class="active-button" id="vis2-nylon-button">Nylon</button>
          <button data-filter="Polyester">Polyester</button>
          <button data-filter="Rayon" id="vis2-rayon-button">Rayon</button>
        </div>

        <div class="natural-buttons">
          <button data-filter="Alpaca">Alpaca</button>
          <button data-filter="Cashmere">Cashmere</button>
          <button data-filter="Cotton">Cotton</button>

          <button data-filter="Merino" id="vis2-merino-button">Merino</button>
          <button data-filter="Mohair">Mohair</button>
          <button data-filter="Silk">Silk</button>
          <button data-filter="Wool">Wool</button>
        </div>
      </div>
      </div>

    </div>
      
      <svg id="vis2" width="800" height="600"></svg>
      <h2>What are the Benefits of Synthetic Fibers?</h1>
        <div class="explainer-text">Why are synthetic fibers even used in yarn, despite its lower quality? There are actually many reasons. Synthetic fibers are often a lot cheaper to produce and therefore more affordable. Some people might prefer synthetic fibers if they are avoiding animal products. Another reason, which can be shown through the Ravelry dataset, is that some synthetic fibers are especially durable, like nylon. We saw earlier that nylon is the preferred synthetic fiber when blending with natural fibers. One reason is that nylon can make the yarn more durable, and therefore machine washable. 
          <br>
          <br>
          The visualization below depicts the top 5000 most reviewed yarns and plots them according to the percentage of synthetic and natural fibers it contains, as well as whether it is machine washable. Hovering over the points reveals the yarn's name and the fibers it is composed of. Multiple fibers can be selected to filter yarns that contain all of those fibers. Only a subset of the yarn dataset was plotted to keep the visuzalization legible and renderable.
          <br><br>
          We can see that 
          <button id="vis3-as-text-merino" class="as-text">merino</button>
           is a natural fiber that does okay in the washing machine, where 61% of yarns that contain merino are machine washable. However, if we also select 
           <button id="vis3-as-text-nylon" class="as-text">nylon</button>
           , we can see that 86% of yarns that contain both merino and nylon are machine washable. The same trends can be seen for nylon and some other natural fibers. <strong>This implies that the presence of nylon can increase the chance that a natural fiber will be machine washable, and therefore more durable. Thus, blending fibers can give yarn the best of both worlds: the durability of synthetic fibers, and the high quality of natural fibers.</strong> However, it is important to remember that not all synthetic fibers are made equal. Yarns with 
           <button id="vis3-as-text-rayon" class="as-text">rayon</button> 
            are often not machine washable, despite its composition of synthetic fibers.
        </div>
      <div class="button-filters" id="vis3-buttons">
        <div class="label-container">
          <span class="button-labels">Synthetic Fibers</span>
          <span class="button-labels">Natural Fibers</span>
        </div>

        <div class="button-container">
          <div class="synthetic-buttons">
            <button data-filter="Acrylic">Acrylic</button>
            <button data-filter="Nylon" id="vis3-nylon-button">Nylon</button>
            <button data-filter="Polyester">Polyester</button>
            <button data-filter="Rayon" id="vis3-rayon-button">Rayon</button>
          </div>

          <div class="natural-buttons">
            <button data-filter="Alpaca">Alpaca</button>
            <button data-filter="Cashmere">Cashmere</button>
            <button data-filter="Cotton">Cotton</button>

            <button data-filter="Merino"  class="active-button" id="vis3-merino-button">Merino</button>
            <button data-filter="Mohair">Mohair</button>
            <button data-filter="Silk">Silk</button>
            <button data-filter="Wool">Wool</button>
          </div>
        </div>
      </div>
    </div>
    <div id="filters"></div>
    <svg id="vis3" width="800" height="600"></svg>
   
    <h2>The End</h2>
    <div class="explainer-text">Yarn is complex, and materials really matter. Even though this article looked at a yarn dataset compiled by knitters and crocheters, the truth is that all ready-made clothing is made from fibers! The next time you grab your coat, check its tag to see what it’s made out of. Do the materials match the trends you saw today? </div>
    <h2>Appendix</h2>
    <div class="explainer-text">

      The source of the yarn datatest is taken from awalsh17's Github: <a href="https://github.com/awalsh17/ravelry_yarns">https://github.com/awalsh17/ravelry_yarns</a> 
    
    <br>
    <br>
    The code for this explainer article can be found at my Github: <a href="https://github.com/carrot-123/yarn-explainer">https://github.com/carrot-123/yarn-explainer</a> 
    <br>
    <br>
    I used Chat-GPT to generate code in D3 to help create my visualizations. I used the resulting code as starter templates. Prompts I used looked like: "[Desciption of my data structure] Help me write code in D3 to create a bar chart where the y-axis is the fiber name and the x-axis is the fiber count using this data. Add a drop down menu so the user can select between different fibers." 
  </div>
    <script src="app.js"></script>
  </body>
</html>
